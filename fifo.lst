     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_Task_run
     7 00000000                                 [FILE "fifo.c"]
     8                                          [SECTION .text]
     9 00000000                                 	GLOBAL	_fifo8_init
    10 00000000                                 _fifo8_init:
    11 00000000 55                              	PUSH	EBP
    12 00000001 89 E5                           	MOV	EBP,ESP
    13 00000003 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    14 00000006 8B 4D 0C                        	MOV	ECX,DWORD [12+EBP]
    15 00000009 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
    16 0000000C 89 10                           	MOV	DWORD [EAX],EDX
    17 0000000E 89 48 0C                        	MOV	DWORD [12+EAX],ECX
    18 00000011 89 48 10                        	MOV	DWORD [16+EAX],ECX
    19 00000014 C7 40 04 00000000               	MOV	DWORD [4+EAX],0
    20 0000001B C7 40 08 00000000               	MOV	DWORD [8+EAX],0
    21 00000022 C7 40 14 00000000               	MOV	DWORD [20+EAX],0
    22 00000029 5D                              	POP	EBP
    23 0000002A C3                              	RET
    24 0000002B                                 	GLOBAL	_fifo32_init
    25 0000002B                                 _fifo32_init:
    26 0000002B 55                              	PUSH	EBP
    27 0000002C 89 E5                           	MOV	EBP,ESP
    28 0000002E 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    29 00000031 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
    30 00000034 8B 4D 0C                        	MOV	ECX,DWORD [12+EBP]
    31 00000037 89 10                           	MOV	DWORD [EAX],EDX
    32 00000039 89 48 0C                        	MOV	DWORD [12+EAX],ECX
    33 0000003C 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
    34 0000003F 89 48 10                        	MOV	DWORD [16+EAX],ECX
    35 00000042 C7 40 04 00000000               	MOV	DWORD [4+EAX],0
    36 00000049 C7 40 08 00000000               	MOV	DWORD [8+EAX],0
    37 00000050 C7 40 14 00000000               	MOV	DWORD [20+EAX],0
    38 00000057 89 50 18                        	MOV	DWORD [24+EAX],EDX
    39 0000005A 5D                              	POP	EBP
    40 0000005B C3                              	RET
    41 0000005C                                 	GLOBAL	_fifo8_put
    42 0000005C                                 _fifo8_put:
    43 0000005C 55                              	PUSH	EBP
    44 0000005D 89 E5                           	MOV	EBP,ESP
    45 0000005F 53                              	PUSH	EBX
    46 00000060 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
    47 00000063 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
    48 00000066 83 79 10 00                     	CMP	DWORD [16+ECX],0
    49 0000006A 75 0A                           	JNE	L4
    50 0000006C 83 49 14 01                     	OR	DWORD [20+ECX],1
    51 00000070 83 C8 FF                        	OR	EAX,-1
    52 00000073                                 L3:
    53 00000073 5B                              	POP	EBX
    54 00000074 5D                              	POP	EBP
    55 00000075 C3                              	RET
    56 00000076                                 L4:
    57 00000076 8B 01                           	MOV	EAX,DWORD [ECX]
    58 00000078 8B 51 04                        	MOV	EDX,DWORD [4+ECX]
    59 0000007B 88 1C 02                        	MOV	BYTE [EDX+EAX*1],BL
    60 0000007E 8B 41 04                        	MOV	EAX,DWORD [4+ECX]
    61 00000081 40                              	INC	EAX
    62 00000082 89 41 04                        	MOV	DWORD [4+ECX],EAX
    63 00000085 3B 41 0C                        	CMP	EAX,DWORD [12+ECX]
    64 00000088 74 07                           	JE	L6
    65 0000008A                                 L5:
    66 0000008A FF 49 10                        	DEC	DWORD [16+ECX]
    67 0000008D 31 C0                           	XOR	EAX,EAX
    68 0000008F EB E2                           	JMP	L3
    69 00000091                                 L6:
    70 00000091 C7 41 04 00000000               	MOV	DWORD [4+ECX],0
    71 00000098 EB F0                           	JMP	L5
    72 0000009A                                 	GLOBAL	_fifo32_put
    73 0000009A                                 _fifo32_put:
    74 0000009A 55                              	PUSH	EBP
    75 0000009B 89 E5                           	MOV	EBP,ESP
    76 0000009D 53                              	PUSH	EBX
    77 0000009E 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
    78 000000A1 83 7B 10 00                     	CMP	DWORD [16+EBX],0
    79 000000A5 75 0C                           	JNE	L8
    80 000000A7 83 4B 14 01                     	OR	DWORD [20+EBX],1
    81 000000AB 83 C8 FF                        	OR	EAX,-1
    82 000000AE                                 L7:
    83 000000AE 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
    84 000000B1 C9                              	LEAVE
    85 000000B2 C3                              	RET
    86 000000B3                                 L8:
    87 000000B3 8B 4B 04                        	MOV	ECX,DWORD [4+EBX]
    88 000000B6 8B 13                           	MOV	EDX,DWORD [EBX]
    89 000000B8 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
    90 000000BB 89 04 8A                        	MOV	DWORD [EDX+ECX*4],EAX
    91 000000BE 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
    92 000000C1 40                              	INC	EAX
    93 000000C2 89 43 04                        	MOV	DWORD [4+EBX],EAX
    94 000000C5 3B 43 0C                        	CMP	EAX,DWORD [12+EBX]
    95 000000C8 74 1B                           	JE	L12
    96 000000CA                                 L9:
    97 000000CA 8B 43 18                        	MOV	EAX,DWORD [24+EBX]
    98 000000CD FF 4B 10                        	DEC	DWORD [16+EBX]
    99 000000D0 85 C0                           	TEST	EAX,EAX
   100 000000D2 74 0D                           	JE	L10
   101 000000D4 83 78 04 02                     	CMP	DWORD [4+EAX],2
   102 000000D8 74 07                           	JE	L10
   103 000000DA 50                              	PUSH	EAX
   104 000000DB E8 [00000000]                   	CALL	_Task_run
   105 000000E0 58                              	POP	EAX
   106 000000E1                                 L10:
   107 000000E1 31 C0                           	XOR	EAX,EAX
   108 000000E3 EB C9                           	JMP	L7
   109 000000E5                                 L12:
   110 000000E5 C7 43 04 00000000               	MOV	DWORD [4+EBX],0
   111 000000EC EB DC                           	JMP	L9
   112 000000EE                                 	GLOBAL	_fifo8_get
   113 000000EE                                 _fifo8_get:
   114 000000EE 55                              	PUSH	EBP
   115 000000EF 83 C8 FF                        	OR	EAX,-1
   116 000000F2 89 E5                           	MOV	EBP,ESP
   117 000000F4 56                              	PUSH	ESI
   118 000000F5 53                              	PUSH	EBX
   119 000000F6 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   120 000000F9 8B 71 10                        	MOV	ESI,DWORD [16+ECX]
   121 000000FC 8B 59 0C                        	MOV	EBX,DWORD [12+ECX]
   122 000000FF 39 DE                           	CMP	ESI,EBX
   123 00000101 74 19                           	JE	L13
   124 00000103 8B 41 08                        	MOV	EAX,DWORD [8+ECX]
   125 00000106 8B 11                           	MOV	EDX,DWORD [ECX]
   126 00000108 0F B6 14 10                     	MOVZX	EDX,BYTE [EAX+EDX*1]
   127 0000010C 40                              	INC	EAX
   128 0000010D 89 41 08                        	MOV	DWORD [8+ECX],EAX
   129 00000110 39 D8                           	CMP	EAX,EBX
   130 00000112 74 0C                           	JE	L16
   131 00000114                                 L15:
   132 00000114 8D 46 01                        	LEA	EAX,DWORD [1+ESI]
   133 00000117 89 41 10                        	MOV	DWORD [16+ECX],EAX
   134 0000011A 89 D0                           	MOV	EAX,EDX
   135 0000011C                                 L13:
   136 0000011C 5B                              	POP	EBX
   137 0000011D 5E                              	POP	ESI
   138 0000011E 5D                              	POP	EBP
   139 0000011F C3                              	RET
   140 00000120                                 L16:
   141 00000120 C7 41 08 00000000               	MOV	DWORD [8+ECX],0
   142 00000127 EB EB                           	JMP	L15
   143 00000129                                 	GLOBAL	_fifo32_get
   144 00000129                                 _fifo32_get:
   145 00000129 55                              	PUSH	EBP
   146 0000012A 83 C8 FF                        	OR	EAX,-1
   147 0000012D 89 E5                           	MOV	EBP,ESP
   148 0000012F 56                              	PUSH	ESI
   149 00000130 53                              	PUSH	EBX
   150 00000131 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   151 00000134 8B 71 10                        	MOV	ESI,DWORD [16+ECX]
   152 00000137 8B 59 0C                        	MOV	EBX,DWORD [12+ECX]
   153 0000013A 39 DE                           	CMP	ESI,EBX
   154 0000013C 74 18                           	JE	L17
   155 0000013E 8B 41 08                        	MOV	EAX,DWORD [8+ECX]
   156 00000141 8B 11                           	MOV	EDX,DWORD [ECX]
   157 00000143 8B 14 82                        	MOV	EDX,DWORD [EDX+EAX*4]
   158 00000146 40                              	INC	EAX
   159 00000147 89 41 08                        	MOV	DWORD [8+ECX],EAX
   160 0000014A 39 D8                           	CMP	EAX,EBX
   161 0000014C 74 0C                           	JE	L20
   162 0000014E                                 L19:
   163 0000014E 8D 46 01                        	LEA	EAX,DWORD [1+ESI]
   164 00000151 89 41 10                        	MOV	DWORD [16+ECX],EAX
   165 00000154 89 D0                           	MOV	EAX,EDX
   166 00000156                                 L17:
   167 00000156 5B                              	POP	EBX
   168 00000157 5E                              	POP	ESI
   169 00000158 5D                              	POP	EBP
   170 00000159 C3                              	RET
   171 0000015A                                 L20:
   172 0000015A C7 41 08 00000000               	MOV	DWORD [8+ECX],0
   173 00000161 EB EB                           	JMP	L19
   174 00000163                                 	GLOBAL	_fifo8_status
   175 00000163                                 _fifo8_status:
   176 00000163 55                              	PUSH	EBP
   177 00000164 89 E5                           	MOV	EBP,ESP
   178 00000166 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   179 00000169 5D                              	POP	EBP
   180 0000016A 8B 42 0C                        	MOV	EAX,DWORD [12+EDX]
   181 0000016D 2B 42 10                        	SUB	EAX,DWORD [16+EDX]
   182 00000170 C3                              	RET
   183 00000171                                 	GLOBAL	_fifo32_status
   184 00000171                                 _fifo32_status:
   185 00000171 55                              	PUSH	EBP
   186 00000172 89 E5                           	MOV	EBP,ESP
   187 00000174 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   188 00000177 5D                              	POP	EBP
   189 00000178 8B 42 0C                        	MOV	EAX,DWORD [12+EDX]
   190 0000017B 2B 42 10                        	SUB	EAX,DWORD [16+EDX]
   191 0000017E C3                              	RET
